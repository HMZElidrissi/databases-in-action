"use strict";(self.webpackChunkdatabases_in_action=self.webpackChunkdatabases_in_action||[]).push([[6271],{313:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var t=s(4848),r=s(8453);const i={sidebar_position:4},o="Service Container",a={id:"Understanding-the-Laravel-Ecosystem/Service-Container",title:"Service Container",description:"The foundation of the Laravel framework is its powerful Service Container. To truly understand the framework, a strong grasp of the container is necessary. However, we should note that an Service Container is simply a convenience mechanism for achieving a software design pattern: Dependency Injection. A container is not necessary to perform dependency injection, it simply makes the task easier.",source:"@site/docs/Understanding-the-Laravel-Ecosystem/Service-Container.md",sourceDirName:"Understanding-the-Laravel-Ecosystem",slug:"/Understanding-the-Laravel-Ecosystem/Service-Container",permalink:"/databases-in-action/docs/Understanding-the-Laravel-Ecosystem/Service-Container",draft:!1,unlisted:!1,editUrl:"https://github.com/HMZElidrissi/databases-in-action/blob/main/docs/Understanding-the-Laravel-Ecosystem/Service-Container.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Request Lifecycle",permalink:"/databases-in-action/docs/Understanding-the-Laravel-Ecosystem/Request-Lifecycle"},next:{title:"Laravel Documentation and Community",permalink:"/databases-in-action/docs/Understanding-the-Laravel-Ecosystem/Laravel-Documentation-and-Community"}},c={},d=[{value:"Using the <code>app()</code> function",id:"using-the-app-function",level:2},{value:"Using Facades",id:"using-facades",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"service-container",children:"Service Container"}),"\n",(0,t.jsxs)(n.p,{children:["The foundation of the Laravel framework is its powerful Service Container. To truly understand the framework, a strong grasp of the container is necessary. However, we should note that an Service Container is simply a convenience mechanism for achieving a software design pattern: ",(0,t.jsx)(n.strong,{children:"Dependency Injection"}),". A container is not necessary to perform ",(0,t.jsx)(n.strong,{children:"dependency injection"}),", it simply makes the task easier."]}),"\n",(0,t.jsx)(n.p,{children:"Let's look at a simple example:"}),"\n",(0,t.jsxs)(n.p,{children:["How to initialize a Service class ",(0,t.jsx)(n.code,{children:"UserRepository"})," for example, to use it inside our Controller?"]}),"\n",(0,t.jsx)(n.p,{children:"The most most straightforward way would be:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// UserController.php:\nuse App\\Repositories\\UserRepository;\n\npublic function store(StoreUserRequest $request) {\n    $users = new UserRepository();\n    $users->create($request->validated());\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["But what if I told you that you don't need to initialize the service with ",(0,t.jsx)(n.code,{children:"new UserRepository()"}),"? And maybe you would guess how exactly Service Container could help us?"]}),"\n",(0,t.jsx)(n.p,{children:"The answer is this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"public function store(StoreUserRequest $request, UserRepository $users) {\n    $userService->create($request->validated());\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["With this approach Laravel will automatically create its variable to be used inside the method. And you can do that in any method in your Controllers. More technically we can say it  resolves the ",(0,t.jsx)(n.code,{children:"UserRepository"})," instance from the container and injects it into the constructor."]}),"\n",(0,t.jsxs)(n.p,{children:["And also we can we initialize the ",(0,t.jsx)(n.code,{children:"UserRepository"})," for the whole Controller using the constructor:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// UserController.php:\nuse App\\Repositories\\UserRepository;\n\npublic function __construct(\n    protected UserRepository $users,\n) {}\n\npublic function show(string $id): View\n{\n    $user = $this->users->find($id);\n\n    return view('user.profile', ['user' => $user]);\n}\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"using-the-app-function",children:["Using the ",(0,t.jsx)(n.code,{children:"app()"})," function"]}),"\n",(0,t.jsxs)(n.p,{children:["Without using Dependency Injection, we can access the Service Container (also known as the ",(0,t.jsx)(n.strong,{children:"IoC container"}),") through the ",(0,t.jsx)(n.code,{children:"app()"})," function:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"$users = app()->make('App\\Repositories\\UserRepository');\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This would retrieves an instance of the ",(0,t.jsx)(n.code,{children:"UserRepository"})," from the container."]}),"\n",(0,t.jsx)(n.h2,{id:"using-facades",children:"Using Facades"}),"\n",(0,t.jsx)(n.p,{children:"We can also use Facades to access services registered in the container. Facades provide a convenient static interface to classes registered in the service container."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"use Illuminate\\Support\\Facades\\App;\nuse App\\Repositories\\UserRepository;\n\n$userRepository = App::make(UserRepository::class);\n// or\n$userRepository = App::get(UserRepository::class);\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var t=s(6540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);